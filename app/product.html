<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vuex/3.6.2/vuex.min.js"></script>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
        <link
            href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap"
            rel="stylesheet"
        />
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet" />
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.js"
            integrity="sha512-otOZr2EcknK9a5aa3BbMR9XOjYKtxxscwyRHN6zmdXuRfJ5uApkHB7cz1laWk2g8RKLzV9qv/fl3RPwfCuoxHQ=="
            crossorigin="anonymous"
        ></script>
        <script src="./assets/js/all.js"></script>
        <script src="./assets/js/utils.js"></script>
        <link rel="stylesheet" href="./assets/css/all.css" />
        <link rel="stylesheet" href="./assets/css/pages/product.css" />
        <title>product</title>
    </head>

    <body>
        <div id="app">
            <vue-header></vue-header>

            @@include('./pages/ProductPage/ProductNav.html')

            <!-- your code here... -->
        </div>
        @@include('./components/VueHeader.html')
        <script src="./assets/js/mixins/cartMixins.js"></script>

        <script>
            new Vue({
                el: '#app',
                mixins: [cartMixins],
                data: {
                    rows: [],
                    countOfPage: 10,
                    currPage: 1,
                    filter_name: '',
                    filter: '',
                    newData: [],
                    isReverse: false,
                    sort: '',
                    type: '',
                },
                computed: {
                    filteredRows() {
                        var filter_name = this.filter_name.toLowerCase();

                        return this.filter_name.trim() !== ''
                            ? this.rows.filter(function (d) {
                                  return d.name.toLowerCase().indexOf(filter_name) > -1;
                              })
                            : this.rows;
                    },
                    pageStart() {
                        return (this.currPage - 1) * this.countOfPage;
                    },
                    totalPage() {
                        return Math.ceil(this.filteredRows.length / this.countOfPage);
                    },

                    sortArray() {
                        let vm = this;
                        return vm.productsList.sort(function (a, b) {
                            a = a[vm.sort];
                            b = b[vm.sort];
                            if (vm.isReverse) {
                                return a - b;
                            } else if (!vm.isReverse) {
                                return b - a;
                            } else {
                                return;
                            }
                        });
                    }, //conputed
                },

                methods: {
                    setPage(productId) {
                        // if( index <= 0 || index > this.totalPage ){}
                        this.currPage = productId;
                    },
                    changeHandler() {
                        let i = this.sort;
                        if (this.type == i) {
                            a - b;
                        } else if (this.type == !i) {
                            b - a;
                        }
                    },
                },
                created() {
                    let self = this;
                    $.get('productsList', function (res) {
                        self.rows = res;
                    });
                },
                watch: {
                    type: 'changeHandler',
                },
            });
        </script>
    </body>
</html>
