<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="./assets/css/all.css">
<link rel="stylesheet" href="./assets/css/pages/dictionary.css">
<script src="../node_modules/jquery/dist/jquery.js"></script>
<script src="../node_modules/vue/dist/vue.js"></script>
<script src="./assets/js/all.js"></script>
<title>Document</title>
</head>

<body>
    <div id="dictionary">
    <vue-header></vue-header>
        <main class="container dictionary pt-10">
            <!-- display -->
            <section class="block mb-10">
                <header class="block__header block__header--nav">
                    <h2 class="block__header__title">車車圖鑑</h2>
                    <button class="btn">查看商品</button>
                </header>
                <section class="block__body bg-white pt-9 pb-14 pt-xs-5 pb-xs-5">
                    <div class="display">
                        <div class="display__cover mb-10">
                            <h2 class="display__title mb-2">{{targetProduct.eng}}</h2>
                            <img :src="targetProduct.displayImgURL" class="display__img">
                            <div :class="carIDClass">{{targetProduct.series}}<span>{{targetProduct.seriesId}}</span>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center flex-xs-wrap">
                            <div class="mb-xs-2 w-50 w-md-100">
                                <h3 class="h1 mb-1">{{targetProduct.name}}</h3>
                                <span class="d-inbl mb-5">{{targetProduct.eng}} {{targetProduct.year}}</span>
                                <p class="h4 mb-5">{{targetProduct.description}}</p>
                                <span :class="badgeClass">{{chBadge}}</span>
                                <span v-if="this.targetProduct.extraLabel== 2 || this.targetProduct.extraLabel== 1" :class="extraLabel.className">{{extraLabel.text}}</span>
                            </div>
                            <div class="text-right mx-xs-auto">
                                <svg :class="getPinClass" width="120" height="120" viewBox="0 0 80 80">
                                    <circle cx="40" cy="40" r="30" stroke-width="4" />
                                    <circle cx="40" cy="40" r="25" stroke-width="2" />
                                    <path d="M 23,30 A 20,20 0 0 1 57,30" stroke-width="1" />
                                    <path d="M 23,50 A 20,20 0 0 0 57,50" stroke-width="1" />
                                    <text x="20" y="48" class="pin__text pin__text--lg">GET</text>
                                </svg>
                                <!-- pin 收藏大師-->
                              <pin :disabled="!memberHasPin" :series="targetProduct.series">
                            </div>
                        </div>
                        <!-- <img src="./assets/img/icon/icon-left.svg" alt="prev"
                            class="swiper-pagination swiper-pagination-prev">
                        <img src="./assets/img/icon/icon-right.svg" alt="next"
                            class="swiper-pagination swiper-pagination-next"> -->
                    </div>
                </section>
            </section>
            <!-- dictionary list -->
            <section class="block">
                <nav class="block__header block__header--nav">
                    <ul class="d-flex mb-md-4">
                        <li class="mr-20 mr-md-15 mr-sm-10"><a href="#" class="block__header__title">全部圖鑑</a></li>
                        <li><a href="#" class="block__header__title">我的圖鑑</a></li>
                    </ul>
                    <div class="ml-auto w-md-100 text-right">
                        <button class="btn btn--link text-coffee mr-8 mr-sm-1">關鍵字搜尋</button>
                        <button class="btn btn--outline mr-8 mr-sm-1">重置</button>
                        <button class="btn">搜尋</button>
                    </div>
                </nav>
                <ul class="row block__body">
                    <!-- post -->
                    <post v-for="(product,index) in products" v-bind="product"
                        @click.native.prevent="handleClickPost(index)"
                        :active="product.productId === targetProduct.productId" :show-pin="isPostPin(product.productId)"></post>
                </ul>
            </section>
        </main>
    </div>

    
    @@include('./components/VueHeader.html')
    @@include('./components/Pin.html')
    @@include('./pages/DictionaryPage/DictionaryPost.html');
    @@include('./pages/DictionaryPage/DictionaryPostPin.html');



    <script>   
        new Vue({
            el: '#dictionary',
            data: { //變數存放的地方
                products: [{
                        name: '藍寶堅尼Countach',
                        eng: 'LAMBORGHINI LP500S',
                        series: 'PM',
                        seriesId: '01',
                        imgURL: './assets/img/pic/3.jpg',
                        displayImgURL: './assets/img/pic/0.png',
                        productId: '123',
                        year: 2007,
                        description: '中置引擎超級跑車，有著跨時空的前衛感',
                        extraLabel: 1,
                    },
                    {
                        name: '豐田 PRIUS 香港警車',
                        eng: 'TOYOTA HONG KONG ',
                        series: 'PA',
                        seriesId: '03',
                        imgURL: 'https://fakeimg.pl/992x744/',
                        displayImgURL: './assets/img/pic/0.png',
                        productId: '120',
                        year: 2010,
                        description: '香港油電混合警車初登場',
                        extraLabel: null,
                    },
                    {
                        name: '三菱夫桑阪急巴士',
                        eng: 'MITSUBISHI AEROSTAR',
                        series: 'BS',
                        seriesId: '08',
                        imgURL: 'https://fakeimg.pl/992x744/',
                        displayImgURL: './assets/img/pic/0.png',
                        productId: '121',
                        year: 2015,
                        description: '運行於大阪地區的巴士，阪急巴士以米色和藍色配色而聞名，同時也是一款環保低排放巴士',
                        extraLabel: 3,
                    },
                ],
                targetProduct: {
                    name: '藍寶堅尼Countach',
                    eng: 'LAMBORGHINI LP500S',
                    series: 'PM',
                    seriesId: '01',
                    imgURL: './assets/img/pic/3.jpg',
                    displayImgURL: './assets/img/pic/0.png',
                    productId: '123',
                    year: 2007,
                    description: '中置引擎超級跑車，有著跨時空的前衛感',
                    extraLabel: 1, 
                },
                memberOwnProductIdList:['120','121'],
                memberHasPin: true,
            },
            computed: {
                carIDClass() {
                    return `carID carID--lg bg-series-${this.targetProduct.series} po-re `
                },
                badgeClass() {
                    return `badge bg-series-${this.targetProduct.series} mr-2`
                },
                getPinClass(){
                    return this.memberOwnProductIdList.indexOf(this.targetProduct.productId)? 'pin':'pin pin--disabled' 
                },  
                chBadge() {
                    const seriesNames = {
                        BS: '巴士系',
                        EN: '工程系',
                        TA: '計程車系',
                        EM: '消防救護系',
                        PM: 'PREMIUM系',
                        PA: '警車系',
                        RV: 'RV休旅系',
                        CA: '轎車系'
                    }
                    return seriesNames[this.targetProduct.series]
                },
                extraLabel() {
                    if (this.targetProduct.extraLabel === 1) {
                        return {
                           text: '期間限定',
                           className: 'badge badge--primary'};
                    } else if (this.targetProduct.extraLabel === 2) {
                        return {
                           text: '點數限定',
                           className: 'badge bg-blue'};
                    }else {
                        return {}
                    }
                },
            },
            methods: {
                handleClickPost(index) {
                    this.targetProduct = this.products[index];
                },
                isPostPin(theProductId){
                    return this.memberOwnProductIdList.indexOf(theProductId);
                }
            }
        });
    </script>
</body>

</html>