<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="./assets/css/all.css">
<link rel="stylesheet" href="./assets/css/pages/dictionary.css">
<script src="../node_modules/jquery/dist/jquery.js"></script> 
<script src="../node_modules/vue/dist/vue.js"></script>
<script src="./assets/js/all.js"></script>
<title>Document</title>
</head>

<body>
    <div id="app">
        <the-header></the-header>
        <main class="container dictionary pt-10">
            <!-- display -->
            <section class="block mb-10">
                <header class="block__header block__header--nav">
                    <h2 class="block__header__title">車車圖鑑</h2>
                    <button class="btn">查看商品</button>
                </header>
                <section class="block__body bg-white pt-9 pb-14 pt-xs-5 pb-xs-5">
                    <div class="display">
                        <div class="display__cover mb-10">
                            <h2 class="display__title mb-2">{{targetProduct.eng}}</h2>
                            <img :src="targetProduct.displayImgURL" class="display__img">
                            <div :class="carIDClass">{{targetProduct.series}}<span>{{targetProduct.seriesId}}</span>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center flex-xs-wrap">
                            <div class="mb-xs-2 w-50 w-md-100">
                                <h3 class="h1 mb-1">{{targetProduct.name}}</h3>
                                <span class="d-inbl mb-5">{{targetProduct.eng}} {{targetProduct.year}}</span>
                                <p class="h4 mb-5">{{targetProduct.description}}</p>
                                <span :class="badgeClass">{{chBadge}}</span>
                                <span v-if="targetProduct.series == 2" class="badge badge--primary">本月主打</span>
                            </div>
                            <div class="text-right mx-xs-auto">
                                <svg class="pin" width="120" height="120" viewbox="0 0 80 80">
                                    <circle cx="40" cy="40" r="30" stroke-width="4" />
                                    <circle cx="40" cy="40" r="25" stroke-width="2" />
                                    <path d="M 23,30 A 20,20 0 0 1 57,30" stroke-width="1" />
                                    <path d="M 23,50 A 20,20 0 0 0 57,50" stroke-width="1" />
                                    <text x="20" y="48" class="pin__text pin__text--lg">GET</text>
                                </svg>
                                <!-- pin 收藏大師-->
                                <svg class="pin pin--gray" width="120" height="120" viewbox="0 0 80 80">
                                    <circle cx="40" cy="40" r="30" stroke-width="4" />

                                    <path d="M 18.4,27.5 A 25,25 0 0 1 61.6,27.5" stroke-width="2" />
                                    <path d="M 18.4,52.5 A 25,25 0 0 0 61.6,52.5" stroke-width="2" />
                                    <path d="M 23,30 A 20,20 0 0 1 57,30" stroke-width="1" />
                                    <path d="M 23,50 A 20,20 0 0 0 57,50" stroke-width="1" />
                                    <text x="15" y="45" class="pin__text">收藏大師</text>
                                </svg>
                            </div>
                        </div>
                        <img src="./assets/img/icon/icon-left.svg" alt="prev"
                            class="swiper-pagination swiper-pagination-prev">
                        <img src="./assets/img/icon/icon-right.svg" alt="next"
                            class="swiper-pagination swiper-pagination-next">
                    </div>
                </section>
            </section>
            <!-- post -->
            <section class="block">
                <nav class="block__header block__header--nav">
                    <ul class="d-flex mb-md-4">
                        <li class="mr-20 mr-md-15 mr-sm-10"><a href="#" class="block__header__title">全部圖鑑</a></li>
                        <li><a href="#" class="block__header__title">我的圖鑑</a></li>
                    </ul>
                    <div class="ml-auto w-md-100 text-right">
                        <button class="btn btn--link text-coffee mr-8 mr-sm-1">關鍵字搜尋</button>
                        <button class="btn btn--outline mr-8 mr-sm-1">重置</button>
                        <button class="btn">搜尋</button>
                    </div>
                </nav>
                <ul class="row block__body">
                    <!-- li -->
                    <post v-for="(product,index) in products" v-bind="product"
                        @click.native.prevent="handleClickPost(index)"
                        :active="product.productId === targetProduct.productId"></post>
                </ul>
            </section>
        </main>
    </div>

    @@include('./components/Header.html')
    <script>
        Vue.component('post', {
            template: `
        <li class="col-4 col-lg-3 col-sm-4 mb-5">
            <div :class="postClass">
                <div class="post__text">
                    <h2 class="h6 mb-1">{{name}}</h2>
                    <h3 class="h6">{{eng}}</h3>
                <div :class="postCarIDClass">{{series}}<span>{{seriesId}}</span></div>
                </div>
                <div class="post__pic">
                    <img :src="imgURL">
                </div>
            </div>
        </li>
            `,
            props: ['name', 'eng', 'series', 'seriesId', 'productId', 'imgURL', 'active'],
            computed: {
                postCarIDClass() {
                    return `carID bg-series-${this.series}`
                },
                postClass() {
                    return {
                        post: true,
                        'post--active': this.active,
                    }
                },
            }
        });
        new Vue({
            el: '#app',
            data: { //變數存放的地方
                products: [{
                        name: '藍寶堅尼Countach',
                        eng: 'LAMBORGHINI LP500S',
                        series: 'PM',
                        seriesId: '01',
                        imgURL: './assets/img/pic/3.jpg',
                        displayImgURL: './assets/img/pic/0.png',
                        productId: '123',
                        year: 2007,
                        description: '中置引擎超級跑車，有著跨時空的前衛感',
                        extraLabel: 2,
                    },
                    {
                        name: '豐田 PRIUS 香港警車',
                        eng: 'TOYOTA HONG KONG ',
                        series: 'PA',
                        seriesId: '03',
                        imgURL: 'https://fakeimg.pl/992x744/',
                        displayImgURL: './assets/img/pic/0.png',
                        productId: '120',
                        year: 2010,
                        description: '香港油電混合警車初登場',
                        extraLabel: null,
                    },
                    {
                        name: '三菱夫桑阪急巴士',
                        eng: 'MITSUBISHI AEROSTAR',
                        series: 'BS',
                        seriesId: '08',
                        imgURL: 'https://fakeimg.pl/992x744/',
                        displayImgURL: './assets/img/pic/0.png',
                        productId: '121',
                        year: 2015,
                        description: '運行於大阪地區的巴士，阪急巴士以米色和藍色配色而聞名，同時也是一款環保低排放巴士',
                        extraLabel: 3,
                    },
                ],
                targetProduct: {
                    name: '藍寶堅尼Countach',
                    eng: 'LAMBORGHINI LP500S',
                    series: 'PM',
                    seriesId: '01',
                    imgURL: './assets/img/pic/3.jpg',
                    displayImgURL: './assets/img/pic/0.png',
                    productId: '123',
                    year: 2007,
                    description: '中置引擎超級跑車，有著跨時空的前衛感',
                    extraLabel: 2,
                },
                loading: true,
            },
            computed: {
                carIDClass() {
                    return `carID carID--lg bg-series-${this.targetProduct.series} po-re `
                },
                badgeClass() {
                    return `badge bg-series-${this.targetProduct.series} mr-2`
                },
                chBadge() {
                    const seriesNames = {
                        BS: '巴士系',
                        EN: '工程系',
                        TA: '計程車系',
                        EM: '消防救護系',
                        PM: 'PREMIUM系',
                        PA: '警車系',
                        RV: 'RV休旅系',
                        CA: '轎車系'
                    }
                    return seriesNames[this.targetProduct.series]
                },
                // extraBadge() {
                //     const extraLabels = {
                //         1: '期間限定',
                //         2: '點數限定',
                //     }
                //     if (this.targetProduct.extraLabel )
                // }
            },
            methods: {
                handleClickPost(index) {
                    this.targetProduct = this.products[index];
                }

            }
        });
    </script>
</body>

</html>